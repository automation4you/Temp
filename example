# Send POST request to GitHub
try {
    # Bypass SSL certificate validation (TEMPORARY FOR TESTING ONLY)
    [Net.ServicePointManager]::ServerCertificateValidationCallback = { $true }

    $response = Invoke-RestMethod -Uri $githubWebhookUrl -Method Post -Headers @{
        "Authorization" = "Bearer $githubToken"
        "Content-Type" = "application/json"
    } -Body $githubPayload

    # Ensure we handle empty responses from GitHub API
    if (-not $response) {
        Write-Host "GitHub API returned no body, assuming success."
        $response = @{"status"="GitHub Dispatch Success"}
    }

    Write-Host "GitHub Dispatch Response: $($response | ConvertTo-Json -Depth 10)"
} catch {
    Write-Host "Error calling GitHub API: $_"
}
